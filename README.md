# Cloud-Basic

## 클라우드 컴퓨팅
- 클라우드 컴퓨팅 소개
- 클라우드 컴퓨팅 관련 용어
- 데이터센터
- 공용 클라우드와 사설 클라우드
- 클라우드 컴퓨팅 관련 기술 소개

클라우드 컴퓨팅 개념

대형 전력회사에서 전기를 받아쓰듯이 중앙집중화 된 대형 데이터센터에서 서비스를 받고, 소프트웨어 프로그램들도 인터넷 망을 통해서 자유롭게 빌려 쓴다. IT 자원을 구매하거나 소유할 필요 없이, 필요한 만큼 사용료를 주고 쓰는 개념이 바로 "클라우드컴퓨팅" 이다. -니컬러스 카-

배경 및 필요성

새로운 디지털 시대는 클라우드컴퓨팅이 중심이 될 것이다. -빌 게이츠

미래 인터넷 경제의 최대 화두는 클라우드컴퓨팅의 가속화에 있다. -에릭 슈미츠

사용자 편의성, 서비스 연계성, 자원의 공동활용

경제성

- 실제 자원 활용률 : 5~20%
- 특정 시점에서만 활용률이 높음
    - 스포츠 시즌 : 영상 스트리밍
    - 쇼핑 시즌 : 초콜릿 쇼핑몰(예: 발렌타인데이/빼빼로데이)

오버 프로비저닝 - 서버 활용률이 낮은 경우

언더프로비저닝 - 서버 활용률을 넘어서 사용할 경우

클라우드 컴퓨팅을 이용해서 서버활용률을 적절하게 조정한다

데이터 센터

- 수만개의 서버를 묶어둔 것
- 자원의 활용이 적절한지 감시하고 문제가 생겼을 시 대응한다
- 데이터센터의 온도가 올라갈 경우 기능저하, 장애가 나올 수 있기 때문에 적정온도 유지

제공 유형에 따른 분류

IaaS - 인프라 제공 서비스 : 프로세싱 파워, 서버, 네트워크, 가상화 및 OS와 같은 기본적인 컴퓨팅 자원을 제공하는 클라우드 서비스

PaaS - 플랫폼 제공 서비스 : 클라우드 컴퓨팅 환경을 통해 어플리케이션 개발 플랫폼을 제공하는 서비스. 단말을 위한 API를 제공하거나 다양한 이기종 간의 단말에서의 개발 환경을 제공

SaaS - 소프트웨어 제공 서비스 : 별도의 전용 소프트웨어를 제공하여 소비자가 단지 어플리케이션만을 사용하고 어플리케이션이 실행되는 운영체제, 하드웨어 또는 네트워크 인프라는 제어하지 않는 클라우드 서비스

사용 유형에 따른 분류

Public 공용클라우드 : 제3의 회사 (예 : Amazon AWS, Microsoft Azure, Google Cloud, KT uCloud, NAVER Cloud, TOAST) 에서 제공되는 클라우드를 인터넷으로 접속해 사용

Private 사설 클라우드 : 인터넷을 통하지 않고 사내 등에 직접 하드웨어 구입 후 클라우드를 구축, 네트워크 속도, 보안 및 법적인 문제에 따라 사용하는 경우가 많음

Hybrid 하이브리드 클라우드 : 공용 클라우드와 사설 클라우드의 적절한 조합

공용 클라우드 예

Amazon EC2

- 자사 컴퓨팅 자원을 인터넷을 통해 제공하여 초기 시장 선도
- '06년 EC2(Elastic Computer Cloud)를 출시
- 전 세계 대상 온라인 서점 서비스에 사용되는 유휴 서버 자원들을 가상화시켜 서비스를 제공

Microsoft Azure

- 2009년 PaaS를 중심으로 정식 서비스를 시작, 현재는 2018년 기준, 54개 데이터센터를 기반으로 IaaS, PaaS, SaaS 모두를 제공

Google Cloud

- 1992년 시작된 검색 엔진을 기반으로 다양한 분산, 클라우드 컴퓨팅 기술을 개발 및 선도

사설 클라우드 예

- 기업/회사 내 데이터센터를 구축하여 직접 클라우드를 관리
- 사내 클라우드 구축 + 공용 서비스 인프라를 위해 사용

클라우드 컴퓨팅 : 클라우드 가상화

가상 자원은 클라우드 컴퓨팅을 탄생하는 데 있어 핵심 기술에 해당합니다

컨테이너 & 베어베탈

- 가상 머신은 하이퍼바이저 위에서 별도의 운영체제와 함께 동작합니다
- 컨테이너는 공통된 운영체제(커널)를 기반으로 독립적으로 응용프로그램을 실행합니다
- 베어메탈은 가상화/컨테이너 기반이 준비되어 있지 않은 물리 서버로, 베어메탈에 가상화/컨테이너 서비스를 구축하여 클라우드 컴퓨팅 서비스를 만듭니다

프로그래머블 / 소프트웨어 정의 인프라

- 원하는 때 원하는 만큼 자원을 확장하거나 줄이는 과정을 수동이 아닌 프로그래밍 가능한 인프라 환경을 통해 자동으로 이뤄집니다
- 인프라 전체를 소프트웨어 기반으로 제어하는 환경을 소프트웨어 정의 인프라/소프트웨어 정의 데이터센터 등 용어로 이야기하기도 합니다

## 가상화
가상화란

- 가상화란 컴퓨터 자원의 추상화(abstract)를 일컫는 광범위한 용어
- 간단하게는 어떤 사물을 물리적인 것이 아닌 가상으로서 생성하는 과정으로, 컴퓨터, 운영체제, 스토리지, 어플리케이션, 네트워크 등에 적용이 가능함
- 그렇다 하더라도, 가상화의 핵심은 서버 가상화

가상화의 기원

- 가상화의 기원은 최초 1960년대 IBM 메인 프레임에서 파티셔닝을 통해 서로 다른 업무를 동시에 실행하여 대용량 컴퓨팅 자원을 효율적으로 활용한 것이 그 효시로써, 컴퓨팅 기술의 발전에 따라 이를 x86 플랫폼 상에서 구현할 수 있게 된 것이 현재의 x86 서버 가상화
- 단순히 서버 자원 만을 공유하던 기존의 가상화는 데이터 센터 인프라 자원(스토리지, 네트워크, 보안, 재해복구)으로 그 범위를 넓혀 이제는 데이터 센터 자체에 대한 가상화(SDDC)가 진행중
- 과거 가상화되지 않은 서비스를 도입하는데 걸리는 시간은 현재 가상화를 통해 큰폭으로 단축됨

하이퍼바이저 - Native & Hosted

- 서버 가상화에서 가상 머신의 생성 및 관리를 가능케하는 소프트웨어

Native(bare metal)

하드웨어에 직접 설치되어 호스트에서 발생하는 오버헤드를 감소시킴

Hosted

기존 운영체제에서 동작하는 일반 프로그램과 같은 레벨에서 실행 게스트 OS의 종류에 제약이 적음

TYPE 1

물리 서버 위에 하이퍼바이저를 구동시켜 여러개의 가상 서버를 만드는 타입

TYPE 2

물리 서버 위에 운영체제를 구동시키고 그 위에 여러 개의 하이퍼바이저를 실행시켜 여러 가상서버를 만드는 타입

전가상화

하드웨어를 모두 가상화 한 것

Guest OS를 아무런 수정 없이 이용이 가능

반가상화

하드웨어를 완전하게 가상화하지 않음

Guest OS가 직접적으로 하드웨어를 제어할 수 없음. OS 코드 수정 필요

서버 가상화를 위한 하드웨어 지원

하드웨어 지원 가상화

- 가상화 솔루션의 VMM(Virtualization Machine Monitor = Hypervisor)의 구동에서 CPU overhead를 줄이기 위한 기술
- 인텔/AMD는 VMM 기술에서 사용되는 가상화 구현 관련 명령어 패턴을 하드웨어 기술로 구현함

참고 : CPU Ring 구조

- 전통적으로 Ring 0번에서 3번까지 총 4개가 잇는데, 0을 관리자 모드, 3을 일반 모드로 사용
- 가상화를 위해서는 물리 CPU에서 추가적인 Ring 계층 사용이 필요한데, 소프트웨어적으로 Ring 1을 하나 더 사용하면 성능이 저하됨
- CPU 하드웨어 내부적으로 계층을 처리해주면 속도가 빨라짐

인텔 CPU : Intel VT

- Intel VT-x, VT-l

: CPU 단에서 제공되는 기술이며, 인텔의 가상화 기술 중 x86서버에 탑재되는 Xeon processor에 대한 기술을 VT-x라고 하며, 유닉스 서버용 프로세서인 Itanium processor에 대한 기술을 Vt-i라 부름

- Intel VT-d

: Virtualization Technology for Directed I/O 를 의미하며, I/O가 사용하는 DMA 주소를 물리 서버와 VM에 매핑하는 것을 하드웨어로 구현한 것

- Intel VT-c

: Virtualization Technology for Connectivity를 의미하며, 가상화 환경에서 네트워크 카드의 성능을 향상시킴

AMD CPU : AMD-V

- 64bit x86-architecture에 대한 AMD의 가상화 기술을 AMD-V라 부름
- AMD-V는 애슬론 64 및 튜리온 64 X2, 옵테론 2세대 및 페넘 이후의 프로세서에 존재함
- AMD는 입출력 메모리 관리 장치(IOMMU) 기술을 AMD-V에 추가함

하이퍼바이저 종류

- 상용 : VMWare Workstation, ESXi, Microsoft Hyper-V, Citrix XenServer 등
- 오픈소스 : VirtualBox, Xen, KVM 등

서버 가상화와 클라우드

- 서버 가상화는 클라우드 인프라를 만드는 기반 기술
- 클라우드 인프라를 실제 만들려면, "네트워크"도 필요합니다
- 네트워크 가상화는 가상 머신들이 사용하는 네트워크 대역을 직접 만드는 것을 가능하게 하는 기술입니다